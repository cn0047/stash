REST (Representational State Transfer) aka RESTful
-

REST - software architectural style.

Properties:
* Performance (Servers and clients may be replaced and developed independently).
* Scalability to support large numbers of components.
* Simplicity of interfaces.
* Stateless (RESTful APIs).
* Cacheable.
* Uniform interface.
* etc...

The fundamental concept in any RESTful API is the resource.
It is similar to an object instance in an object-oriented programming language.

Resources can be grouped into collections.
Each collection is homogeneous so that it contains only one type of resource.

The following representations are common for resources: json, yaml, xml, html.

| Type | Content-Type                  |
|------|-------------------------------|
| JSON | application/x-resource+json   |
|      | application/x-collection+json |

Format must be in URI, like `/users/1/images.json` or in `Accept` HTTP header.

URLs generated by the API should be absolute URLs.

Good:
````sh
/users/12345
/customers/33245/orders/8769/lineitems/1

/products          # not getAllProducts
/products?name=ABC # not /getProductsByName
/products?type=xyz # not /getProductsByType
````
Use nouns and NOT the verbs. Also use plurals.

|   | name     | description                                                             |
|---|----------|-------------------------------------------------------------------------|
| ● | GET      |                                                                         |
|   | HEAD     | like get but return header only (good to check whether resource exists) |
| ● | POST     | create                                                                  |
| ● | PUT      | update (if it does not exist, create it.)                               |
|   | PATCH    | update                                                                  |
| ● | DELETE   |                                                                         |
|   | OPTIONS  | return available HTTP methods                                           |

PATCH applies a delta rather than (PUT) replacing the entire resource.
PUT method body contains entire entity.
PATCH method body describes modifications to be made to a resource.

The PUT and DELETE methods are referred to as idempotent,
meaning that the operation will produce the same result no matter how many times it is repeated.
The GET method is a safe method (or nullipotent), meaning that calling it produces no side-effects.

| code             | desc                                                   |
|------------------|--------------------------------------------------------|
| 201 Created      | successful creation occurred (via either POST or PUT)  |
| 202 Accepted     | should only be returned for POST, PUT, PATCH or DELETE |
| 204 No Content   | Often used for DELETE and PUT                          |
| 400 Bad Request  |                                                        |
| 401 Unauthorized | missing or invalid authentication token                |
| 403 Forbidden    | user is not authorized                                 |

| method              | success                               |   fail                                                               |
|---------------------|---------------------------------------|----------------------------------------------------------------------|
| GET      PUT DELETE | 200 OK                                |                                                                      |
|     POST PUT        | 201 Created                           |                                                                      |
|     POST PUT DELETE | 202 Accepted (eventual consistency)   |                                                                      |
|     POST PUT DELETE | 204 No Content (eventual consistency) |                                                                      |
| GET POST PUT DELETE |                                       | 400 Bad Request                                                      |
| GET POST PUT DELETE |                                       | 401 Unauthorized                                                     |
| GET POST PUT        |                                       | 402 Payment Required                                                 |
| GET POST PUT DELETE |                                       | 403 Forbidden                                                        |
| GET POST PUT DELETE |                                       | 404 Not Found                                                        |
|     POST PUT        |                                       | 404 Not Found (processing request that references related resource ) |
|     POST PUT DELETE |                                       | 405 Method Not Allowed                                               |
|     POST PUT        |                                       | 409 Conflict                                                         |

For security it's better to return JSON with an Object on the outside:
<br>not: `[{"object": "inside an array"}]`
<br>but: `{"result": [{"object": "inside an array"}]}`

#### Real problems

<br>P: URL Path to endpoint which answers yes/no to send push notification.
<br>S:
````sh
curl -X GET api.svc.com/v1/notifications/push/devices/{dID}/enabled
````

<br>P: What to do with ugly names like: deploys...
<br>S: ?

<br>P: GET user not by ID (PK) but by email (unique key) - how url should look.
<br>S: `/users/?email=e`.

<br>P: GET aggregated user (db, facebook, twitter, etc) - how to provide payload.
<br>S: Use api-gateway.

<br>P: Pagination - how to provide limit, offset.
<br>S: Provide or header either body payload (or in url):
````sh
GET /api/collection
Range: resources=100-199 # in body

curl 'http://localhost:8080/v1/api/collection' -XGET -d '{"resources_from":100, "resources_to":199}'

products?limit=25&offset=50
````

<br>P: Versioning API.
<br>S: Use API version in url, like: `my-api-host.com/v1/users/12345`,
version in url super simple to invalidate, version in header harder to invalidate.
