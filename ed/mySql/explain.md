EXPLAIN
-

**Столбец type**

В руководстве по MySQL сказано, что в этом столбце отражается «тип
соединения», но нам кажется, что следует говорить скорее о методе до­
ступа, иными словами, о том, как MySQL решила искать строки в таб­
лице. Перечислим наиболее важные методы доступа в порядке от наи-
худшего к наилучшему.Столбцы результата команды EXPLAIN

**ALL**

Этот подход обычно называют сканированием таб­лицы. В  общем
случае речь идет о том, что MySQL должна просмотреть таб­лицу от
начала до конца, чтобы найти нужную строку. Существуют исклю-
чения, например запросы с фразой LIMIT или запросы, для которых
в столбце Extra отображается значение «Using distinct/not exists».

**index**

То же, что сканирование таб­лицы, только MySQL просматривает ее
в  порядке, задаваемом индексом, а  не в  порядке следования строк.
Основное преимущество заключается в  том, что не требуется со-
ртировка; недостаток же – высокая стоимость чтения всей таб­лицы
в  порядке, задаваемом индексом. Обычно это означает, что строки
выбираются произвольным образом, что крайне накладно.
Если в  столбце Extra при этом находится значение «Using index»,
значит, MySQL использует покрывающий индекс (см. главу 3) и про-
сматривает только данные в  индексе, не обращаясь к  строкам. Это
гораздо дешевле, чем сканирование таб­лицы в задаваемом индексе.

**range**

Просмотр диапазона  – это ограниченная форма сканирования ин-
декса. Просмотр начинается в  определенной точке индекса и  воз-
вращает строки в  некотором диапазоне значений. Это лучше, чем
полное сканирование, так как не приходится перебирать индекс це-
ликом. Очевидные примеры просмотра диапазона – запросы с усло-
виями BETWEEN или > во фразе WHERE.
Когда MySQL использует индекс для поиска в списке значений, на-
пример, при вычислении предиката IN() или условий, объединенных
связкой OR, также применяется просмотр диапазона. Однако это со-
вершенно разные методы доступа с  иными характеристиками про-
изводительности. Дополнительную информацию см. во врезке «Что
такое условие поиска по диапазону?» в главе 3 (стр. 180).
К этому методу применимы те же самые соображения о стоимости,
что и к методу index.

**ref**

Это доступ по индексу (иногда он называется поиском по индексу
(index lookup)), в результате которого возвращаются строки, соответ-
ствующие единственному заданному значению. Но таких строк мо-
жет быть несколько, поэтому поиск сочетается с  просмотром. Дан-
ный тип доступа возможен лишь в  случае неуникального индекса
или неуникального префикса ключа в  уникальном индексе. Он на-
зывается ref, потому что значения ключей в индексе сравниваются
с  некоторой справочной (reference) величиной. Справочная величи-
на может быть как константой, так и значением из предыдущей таб­
лицы, если в запросе участвует несколько таб­лиц.
Одним из вариантов ref является тип доступа ref_or_null. В этом слу-
чае MySQL должна выполнить второй просмотр для поиска записей
с ключом NULL.

**eq_ref**

Это поиск по индексу в случае, когда MySQL точно знает, что будет
возвращено не более одного значения. Такой метод доступа приме-
няется, когда MySQL решает использовать первичный ключ или
уникальный индекс для сравнения на равенство с  некоторой спра-
вочной величиной. Этот тип доступа MySQL умеет отлично оптими-
зировать, так как заранее известно, что не придется просматривать
диапазоны отвечающих условию строк или искать дополнительные
строки после того, как одна уже найдена.
const, system
Эти типы доступа MySQL применяет, когда в процессе оптимизации
какую-то часть запроса можно преобразовать в константу. Например,
если вы выбираете первичный ключ строки и помещаете его в усло-
вие WHERE, то MySQL может преобразовать этот запрос в  константу.
Затем соответствующая таб­лица по существу удаляется из операции
соединения.

**NULL**

Этот метод означает, что MySQL сумела разрешить запрос на фазе
оптимизации, так что в ходе выполнения вообще не потребуется об-
ращаться к таб­лице или индексу. Например, для выборки минималь-
ного значения проиндексированного столбца достаточно просмотреть
только индекс, не обращаясь к таб­лице.
