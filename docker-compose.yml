nginx:
    image: nginx:latest
    restart: always
    ports:
        - "80:80"
    volumes:
        - ./ed:/var/www/html/gh/ed
        - ./docker/nginx/default.conf:/etc/nginx/conf.d/default.conf
    links:
        - php-fpm

php-fpm:
    build: ./docker/php-fpm
    volumes:
        - ./ed:/var/www/html/gh/ed
    links:
        - mysql-master
        - mysql-slave-1
        - mongo

# With purpose to check php-cli just run:
# docker-compose exec php-cli php /gh/ed/docker/examples/one/src/es.php
php-cli:
    build: ./docker/php-cli
    volumes:
        - ./ed:/gh/ed
    links:
        - mysql-master
        - mysql-slave-1
        - mongo

phalcon:
    build: ./docker/phalcon

# cd ./ed/docker/examples/one/src && docker run --rm -ti -v $PWD:/app composer install
composer:
    image: composer/composer
    working_dir: /gh/ed
    volumes:
        - ./ed/docker/examples/one/src:/gh/ed
    command: install

mongo:
    image: mongo:latest
